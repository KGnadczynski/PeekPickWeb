<div *ngIf="logged">
  <span defaultOverlayTarget></span>
  <button (click)="openCustom()" class="btn btn-primary">Dodaj komunikat</button>
  <p>
</div>
<div class="row">
  <ba-card class="col-xlg-7 col-xl-9 col-lg-12 col-sm-12 col-xs-12" id="rightPart">
    <div class="search-results"
         infinite-scroll
         [infiniteScrollDistance]="2"
         [infiniteScrollThrottle]="100"
         (scrolled)="onScrollDown()">
      <div class="feed-messages-container">
        <span defaultOverlayTarget></span>
        <!--<div [ngBusy]="{busy: busy, message: 'Czekaj...', backdrop: false, delay: 200, minDuration: 600}"></div>-->
        <div class="feed-message" *ngFor="let komunikat of komunikatyList.komunikaty" (click)='handleClick($event, komunikat)' >
          <div class="message-icon" >
            <img class="photo-icon" src="{{ komunikat.user.company.mainImageUrl}}">
          </div>

          <div class="text-block text-message">
            <div class="message-header">
        <a   [routerLink]="['/pages/company',  komunikat.nearestCompanyBranch.name]" (click)='$event.stopPropagation()' class="author">{{ komunikat.nearestCompanyBranch.name }} {{ komunikat.nearestCompanyBranch.city}} {{ komunikat.nearestCompanyBranch.street}} {{ komunikat.nearestCompanyBranch.streetNo}}
        </a>
            </div>
            <div class="message-content">
              <span class="content">{{ komunikat.content}} </span>
            </div>

            <div class="message-time">
              <div class="top-time">
                Data rozpoczęcia
              </div>
              <div class="post-time">
                {{ komunikat.startDate }}
              </div>
              <div class="ago-time">
                {{ komunikat.endDate }}
              </div>
            </div>

            <div class="preview">
              <img src="{{ komunikat.mainImageUrl}}">
            </div>


          </div>
        </div>
      </div>
    </div>
  </ba-card>
  <ba-card class="col-xlg-3 col-xl-3 col-lg-12 col-sm-12 col-xs-12" title="Filtruj " id="leftPart">
    <div class="filtruj-lokalizacja">
      Lokalizacja
    </div>
    <div >
      <input #google_places_ac  type="text" class="input-block-level"/>
    </div>

    <md-slider min="1" max="1000"></md-slider>
    <div class="filtruj-typ-wiadomosci">
      Typ wiadomości
    </div>
    <div *ngFor="let typKomunikatow of typyKomunikatow" class="typKomunikatuClass">
      <md-checkbox  (change)="toggle(typKomunikatow)">
        {{typKomunikatow}}
      </md-checkbox>
    </div>
    <div class="filtruj-typ-wiadomosci">
      Branża
    </div>
    <div>
      <button type="button"
              (click)="isCollapsed = !isCollapsed">Kultura i rozrywka
      </button>
      <div (collapsed)="collapsed($event)"
           (expanded)="expanded($event)"
           [collapse]="isCollapsed"
      >
        <div *ngFor="let kulturairozrywk of kulturairozrywka">
          <md-checkbox >
            {{kulturairozrywk}}
          </md-checkbox>
        </div>
      </div>
    </div>
    <div>
      <button type="button"
              (click)="isCollapsedGastro = !isCollapsedGastro">Gastronomia i Nocne Życie
      </button>
      <div (collapsed)="collapsed($event)"
           (expanded)="expanded($event)"
           [collapse]="isCollapsedGastro"
      >
        <div *ngFor="let gastronomiainocnezyci of gastronomiainocnezycie">
          <md-checkbox >
            {{gastronomiainocnezyci}}
          </md-checkbox>
        </div>
      </div>
    </div>

    <button type="button" class="btn btn-primary" (click)="clicked()"
    >Wyszukaj
    </button>

  </ba-card>
</div>
