<div id="profile">

    <img src="{{otherImgs?.imageUrl}}" alt="" id="companyImg">
    <h2>{{otherUser?.company.name}}</h2>

    <md-tab-group>
        <md-tab>
            <template md-tab-label>
                <p class="hidden-sm-down">Moje posty</p>
            </template>
            <template md-tab-content>
                <div id="messages">
                    <messages [dest] = "'profile'" *ngIf="idCompany" [id] = idCompany></messages>
                </div>
            </template>
        </md-tab>

        <md-tab>
            <template md-tab-label>
                <p class="hidden-sm-down">Edytuj profil</p>
            </template>
            <template md-tab-content>
                <div id="daneFirmy">
                    <h3>zmień hasło/email</h3>
                    <form id="changeEP" [formGroup]="passwordForm" (ngSubmit)="udpatePassword(passwordForm.value)">
                        <div [ngClass]="{'has-error':!passwordForm.controls['oldPassword'].valid && passwordForm.controls['oldPassword'].touched}">
                            <input type="password" id="oldPassword" placeholder="stare hasło" [formControl]="passwordForm.controls['oldPassword']">
                            <div 
                                *ngIf="!passwordForm.controls['oldPassword'].valid && passwordForm.controls['oldPassword'].touched"
                            >
                                Musisz wpisać stare hasło
                            </div>
                        </div>
                        <div formGroupName="passwords">
                            <input type="password" id="password" placeholder="nowe hasło" formControlName="password">
                            <input type="password" id="passwordRepeat" placeholder="powtórz nowe hasło" formControlName="repeatPassword">
                            <div>
                                <span *ngIf="!passwordForm.controls['passwords'].valid && passwordForm.controls['passwords'].touched">Hasła nie są takie same</span>
                            </div>
                        </div>
                        <button type="submit" [disabled]="!passwordForm.valid">Zapisz</button>
                    </form>
                    <span *ngIf="messageAfter">Pomyślnie zmieniono hasło</span>
                </div>
            </template>
        </md-tab>

        <md-tab>
            <template md-tab-label>
                <p class="hidden-sm-down">Edytuj Dane Firmy</p>
            </template>

            <template md-tab-content>
                <div id="editProfile">
                <h3>edytuj profil</h3>
                    <form id="changeCI" [formGroup]="companyForm" (ngSubmit)="udpateCompanyName(companyForm.value)">
                        <ba-card title="Dodaj zdjęcie profilowe" baCardClass="with-scroll" aria-hidden="true">
                            <ba-picture-uploader  (beforeUpload)="beforeUpload($event)" [picture]="profile.picture" [defaultPicture]="defaultPicture"></ba-picture-uploader>
                        </ba-card>

                        <div id="name">
                            <label for="nazwa">nazwa firmy</label>
                            <input type="text" id="nazwa" formControlName="name">
                        </div>
                        
                        <div id="address" formGroupName="address">
                            <div id="town">
                                <label for="miasto">miasto</label>
                                <input type="text" id="miasto" formControlName="city">
                            </div>
                            <div id="street">
                                <label for="ulica">ulica</label>
                                <input type="text" id="ulica" formControlName="street">
                            </div>
                            <div id="streetNo">
                                <label for="numer">nr ulicy</label>
                                <input type="text" id="numer" formControlName="streetNo">
                            </div>
                        </div>
                        <button type="submit">Zapisz</button>
                    </form>
                </div>
            </template>
        </md-tab>

        <md-tab>
            <template md-tab-label>
                <p class="hidden-sm-down">Dodatkowe Informacje</p>
            </template>
            <template md-tab-content>
                <div id="additionalInfo">
                    <form [formGroup]="additionalForm" (ngSubmit)="udpateCompany2(additionalForm.value)">
                        <div id="contact" formGroupName="contact" >
                            <div id="www">
                                <label for="www">www</label>
                                <input type="text" id="www" formControlName="www">
                            </div>
                            <div id="openingHours">
                                <label for="openingHours">godziny otwarcia</label>
                                <textarea name="openingHours" id="openingHours" cols="30" rows="10" formControlName="openingHours"></textarea>
                            </div>
                            <div id="telephone">
                                <label for="telephone">tel</label>
                                <input type="text" id="telephone" formControlName="telephone"> 
                            </div>
                            <div id="email">
                                <label for="email">e-mail</label>
                                <input type="email" id="email" formControlName="email">
                            </div>
                                <div id="description">
                                <label for="description">opis</label>
                                <textarea name="description" id="description" cols="30" rows="10" formControlName="description"></textarea>
                            </div>
                        </div>
                        <button type="submit">Zapisz</button>
                    </form>
                </div>
            </template>
        </md-tab>
        <md-tab>
        <template md-tab-label>
            <p class="hidden-sm-down">Oddziały</p>
        </template>
        <template md-tab-content>
            <div id="branches">
                <button class="addBranch">Dodaj nowy oddział</button>
                <div [collapse]="isCollapse">
                    <form [formGroup]="branchForm">
                        <label>Nazwa</label>
                        <input type="text" id="name" formControlName="name">
                        <div *ngIf="!branchForm.controls['name'].valid && branchForm.controls['name'].touched">
                            Musisz wpisać nazwę
                        </div>

                        <label>Miasto</label>
                        <input type="text" id="city" formControlName="city">
                        <div *ngIf="!branchForm.controls['city'].valid && branchForm.controls['city'].touched">
                            Musisz wpisać miasto
                        </div>

                        <label>Ulica</label>
                        <input type="text" id="street" formControlName="street">
                        <div *ngIf="!branchForm.controls['street'].valid && branchForm.controls['street'].touched">
                            Musisz wpisać ulicę
                        </div>

                        <label>Nr ulicy</label>
                        <input type="number" id="streetNo" formControlName="streetNo">
                        <div *ngIf="!branchForm.controls['streetNo'].valid && branchForm.controls['streetNo'].touched">
                            Musisz wpisać nr ulicy
                        </div>

                        <label>Strona internetowa</label>
                        <input type="text" id="website" formControlName="website">
                        <div *ngIf="!branchForm.controls['website'].valid && branchForm.controls['website'].touched">
                            Musisz wpisać stronę internetową
                        </div>

                        <label>Numer telefonu</label>
                        <input type="text" id="phoneNumber" formControlName="phoneNumber">
                        <div *ngIf="!branchForm.controls['phoneNumber'].valid && branchForm.controls['phoneNumber'].touched">
                            Musisz wpisać numer telefonu
                        </div>

                        <label>Godziny otwarcia</label>
                        <input type="text" id="openingHours" formControlName="openingHours">
                        <div *ngIf="!branchForm.controls['openingHours'].valid && branchForm.controls['openingHours'].touched">
                            Musisz wpisać godziny otwarcia
                        </div>

                    </form>
                </div>
                <div class="branch" *ngIf="mainBranch">
                    <h2>
                        {{ mainBranch?.name}}
                    </h2>
                    <p>
                        <span>
                            {{ mainBranch?.city }},
                            {{ mainBranch?.street }}
                            {{ mainBranch?.streetNo }}
                        </span>
                    </p>
                    <p>
                        <button class="editBranch">Edytuj oddział</button>
                        <button class="deleteBranch" (click)="deleteBranch(mainBranch.id)">Usuń oddział</button>
                    </p>
                </div>
                
                <div class="branch" *ngFor="let branch of companyBranches">
                    <h2>
                        {{ branch?.name }}
                    </h2>
                    <p>
                        <span>
                            {{ branch?.city }},
                            {{ branch?.street }}
                            {{ branch?.streetNo }}
                        </span>
                    </p>
                    <p>
                        <button class="editBranch">Edytuj oddział</button>
                        <button class="deleteBranch" (click)="deleteBranch(branch.id)">Usuń oddział</button>
                    </p>
                </div>
                
            </div>

        </template>
        </md-tab>
    </md-tab-group>
</div>